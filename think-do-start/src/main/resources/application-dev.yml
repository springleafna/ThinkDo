spring:
  config:
    activate:
      on-profile: dev
  datasource:
    mysql:
      url: jdbc:mysql://${IP}:${MYSQL_PORT}/${MYSQL_DATABASE}?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
      username: ${MYSQL_USERNAME}
      password: ${MYSQL_PASSWORD}
      driver-class-name: com.mysql.cj.jdbc.Driver
      type: com.zaxxer.hikari.HikariDataSource
      hikari:
        auto-commit: true
        maximum-pool-size: 25
        minimum-idle: 15
        idle-timeout: 300000     # 5分钟（必须 < max-lifetime）
        max-lifetime: 600000     # 10分钟
        connection-timeout: 30000
        validation-timeout: 5000  # 5秒，避免验证卡死
        pool-name: mysqlHikariCP
    pgvector:
      driver-class-name: org.postgresql.Driver
      username: ${PGVECTOR_USERNAME}
      password: ${PGVECTOR_PASSWORD}
      url: jdbc:postgresql://${IP}:${PGVECTOR_POST}/${PGVECTOR_DATABASE}
      type: com.zaxxer.hikari.HikariDataSource
      hikari:
        maximum-pool-size: 5
        minimum-idle: 2
        idle-timeout: 300000
        max-lifetime: 1200000       # 20分钟
        connection-timeout: 30000
        pool-name: pgvectorHikariCP
    data:
      redis:
        host: ${IP}
        port: ${REDIS_POST}
        username: ${REDIS_USERNAME}
        password: ${REDIS_PASSWORD}
        database: ${REDIS_DATABASE}
        lettuce:
          pool:
            enabled: true
            max-active: 8
            max-idle: 8
            min-idle: 2
            time-between-eviction-runs: 30000     # 每30秒检查一次空闲连接
            min-evictable-idle-time: 60000        # 连接空闲超过60秒可被回收
            test-while-idle: true                 # 空闲时检测连接有效性
            test-on-borrow: false                 # 借出时不检测（性能考虑）
            test-on-create: false                 # 创建时不检测（性能考虑）
  mybatis-plus:
    mapper-locations: classpath*:/mapper/**.xml
    configuration:
      map-underscore-to-camel-case: true
  logging:
    level:
      com.springleaf.knowseek.mapper: DEBUG
      org.apache.ibatis: DEBUG
      org.apache.ibatis.logging.stdout.StdOutImpl: DEBUG
      org.springframework.web.client: DEBUG
      org.springframework.ai: DEBUG